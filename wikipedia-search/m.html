<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<script src="https://unpkg.com/mithril/mithril.js"></script>
	<link rel="stylesheet" href="style.css?20250101">

	<title>WikiP Search</title>
</head>
<body>

<div id="appRoot" class="main"></div>

<script>

const listOfWikipedias = [
{"lang":"Abkhaz","code":"ab"},
{"lang":"Acehnese","code":"ace"},
{"lang":"Adyghe","code":"ady"},
{"lang":"Afrikaans","code":"af"},
{"lang":"Albanian","code":"sq"},
{"lang":"Alemannic German","code":"als"},
{"lang":"Amharic","code":"am"},
{"lang":"Amis","code":"ami"},
{"lang":"Angika","code":"anp"},
{"lang":"Arabic","code":"ar"},
{"lang":"Aragonese","code":"an"},
{"lang":"Aramaic (Syriac)","code":"arc"},
{"lang":"Armenian","code":"hy"},
{"lang":"Aromanian","code":"roa-rup"},
{"lang":"Assamese","code":"as"},
{"lang":"Asturian","code":"ast"},
{"lang":"Atayal","code":"tay"},
{"lang":"Atikamekw","code":"atj"},
{"lang":"Avar","code":"av"},
{"lang":"Awadhi","code":"awa"},
{"lang":"Aymara","code":"ay"},
{"lang":"Azerbaijani","code":"az"},
{"lang":"Balinese","code":"ban"},
{"lang":"Bambara","code":"bm"},
{"lang":"Banjarese","code":"bjn"},
{"lang":"Banyumasan","code":"map-bms"},
{"lang":"Bashkir","code":"ba"},
{"lang":"Basque","code":"eu"},
{"lang":"Bavarian","code":"bar"},
{"lang":"Belarusian (official Narkamaŭka orthography)","code":"be"},
{"lang":"Belarusian (Taraškievica orthography)","code":"be-tarask"},
{"lang":"Bengali","code":"bn"},
{"lang":"Betawi","code":"bew"},
{"lang":"Bihari(Bhojpuri)","code":"bh"},
{"lang":"BishnupriyaManipuri","code":"bpy"},
{"lang":"Bislama","code":"bi"},
{"lang":"Bosnian","code":"bs"},
{"lang":"Breton","code":"br"},
{"lang":"Buginese","code":"bug"},
{"lang":"Bulgarian","code":"bg"},
{"lang":"Burmese","code":"my"},
{"lang":"Buryat(RussiaBuriat)","code":"bxr"},
{"lang":"Cantonese","code":"zh-yue"},
{"lang":"Catalan","code":"ca"},
{"lang":"Cebuano","code":"ceb"},
{"lang":"CentralBikol","code":"bcl"},
{"lang":"CentralTibetan(LhasaTibetan)","code":"bo"},
{"lang":"Chamorro","code":"ch"},
{"lang":"Chechen","code":"ce"},
{"lang":"Cherokee","code":"chr"},
{"lang":"Chewa","code":"ny"},
{"lang":"Cheyenne","code":"chy"},
{"lang":"Chinese (written vernacular Chinese)","code":"zh"},
{"lang":"Chuvash","code":"cv"},
{"lang":"Classical Chinese","code":"zh-classical"},
{"lang":"Cornish","code":"kw"},
{"lang":"Corsican","code":"co"},
{"lang":"Cree","code":"cr"},
{"lang":"Crimean Tatar","code":"crh"},
{"lang":"Croatian","code":"hr"},
{"lang":"Czech","code":"cs"},
{"lang":"Dagaare","code":"dga"},
{"lang":"Dagbani","code":"dag"},
{"lang":"Danish","code":"da"},
{"lang":"Dinka","code":"din"},
{"lang":"Doteli","code":"dty"},
{"lang":"Dutch","code":"nl"},
{"lang":"Dutch Low Saxon","code":"nds-nl"},
{"lang":"Dzongkha","code":"dz"},
{"lang":"Eastern Min","code":"cdo"},
{"lang":"Egyptian Arabic","code":"arz"},
{"lang":"Emilian–Romagnol","code":"eml"},
{"lang":"English","code":"en"},
{"lang":"Erzya","code":"myv"},
{"lang":"Esperanto","code":"eo"},
{"lang":"Estonian","code":"et"},
{"lang":"Ewe","code":"ee"},
{"lang":"Extremaduran","code":"ext"},
{"lang":"Fante","code":"fat"},
{"lang":"Farefare (Gurene)","code":"gur"},
{"lang":"Faroese","code":"fo"},
{"lang":"FijiHindi","code":"hif"},
{"lang":"Fijian","code":"fj"},
{"lang":"Finnish","code":"fi"},
{"lang":"Fon","code":"fon"},
{"lang":"Franco-Provençal","code":"frp"},
{"lang":"French","code":"fr"},
{"lang":"French Guianese Creole","code":"gcr"},
{"lang":"Friulian","code":"fur"},
{"lang":"Fula","code":"ff"},
{"lang":"Gagauz","code":"gag"},
{"lang":"Galician","code":"gl"},
{"lang":"GanChinese","code":"gan"},
{"lang":"Georgian","code":"ka"},
{"lang":"German","code":"de"},
{"lang":"Ghanaian Pidgin English","code":"gpe"},
{"lang":"Gilaki","code":"glk"},
{"lang":"Gorontalo","code":"gor"},
{"lang":"Gothic","code":"got"},
{"lang":"Greek","code":"el"},
{"lang":"Greenlandic","code":"kl"},
{"lang":"Guarani","code":"gn"},
{"lang":"Gujarati","code":"gu"},
{"lang":"Gun","code":"guw"},
{"lang":"Haitian Creole","code":"ht"},
{"lang":"Hakka Chinese","code":"hak"},
{"lang":"Hausa","code":"ha"},
{"lang":"Hawaiian","code":"haw"},
{"lang":"Hebrew","code":"he"},
{"lang":"Hill Mari","code":"mrj"},
{"lang":"Hindi","code":"hi"},
{"lang":"Hungarian","code":"hu"},
{"lang":"Iban language","code":"iba"},
{"lang":"Icelandic","code":"is"},
{"lang":"Ido","code":"io"},
{"lang":"Igala","code":"igl"},
{"lang":"Igbo","code":"ig"},
{"lang":"Ilocano","code":"ilo"},
{"lang":"Inari Sámi","code":"smn"},
{"lang":"Indonesian","code":"id"},
{"lang":"Ingush","code":"inh"},
{"lang":"Interlingua","code":"ia"},
{"lang":"Interlingue","code":"ie"},
{"lang":"Inuktitut","code":"iu"},
{"lang":"Iñupiaq","code":"ik"},
{"lang":"Irish","code":"ga"},
{"lang":"Italian","code":"it"},
{"lang":"Jamaican Patois","code":"jam"},
{"lang":"Japanese","code":"ja"},
{"lang":"Javanese","code":"jv"},
{"lang":"Judaeo-Spanish","code":"lad"},
{"lang":"Kabardian","code":"kbd"},
{"lang":"Kabiye","code":"kbp"},
{"lang":"Kabyle","code":"kab"},
{"lang":"Kadazandusun","code":"dtp"},
{"lang":"Kalmyk Oirat","code":"xal"},
{"lang":"Kannada","code":"kn"},
{"lang":"Kapampangan","code":"pam"},
{"lang":"Karachay-Balkar","code":"krc"},
{"lang":"Karakalpak","code":"kaa"},
{"lang":"Kashmiri","code":"ks"},
{"lang":"Kashubian","code":"csb"},
{"lang":"Kazakh","code":"kk"},
{"lang":"Khmer","code":"km"},
{"lang":"Kikuyu","code":"ki"},
{"lang":"Kinyarwanda","code":"rw"},
{"lang":"Kirundi","code":"rn"},
{"lang":"Komi","code":"kv"},
{"lang":"Komi-Permyak","code":"koi"},
{"lang":"Kongo","code":"kg"},
{"lang":"Konkani (GoanKonkani)","code":"gom"},
{"lang":"Korean","code":"ko"},
{"lang":"Kotava","code":"avk"},
{"lang":"Kurdish (Kurmanji)","code":"ku"},
{"lang":"Kurdish (Sorani)","code":"ckb"},
{"lang":"Kusaal","code":"kus"},
{"lang":"Kyrgyz","code":"ky"},
{"lang":"Ladin","code":"lld"},
{"lang":"Lak","code":"lbe"},
{"lang":"Lao","code":"lo"},
{"lang":"Latgalian","code":"ltg"},
{"lang":"Latin","code":"la"},
{"lang":"Latvian","code":"lv"},
{"lang":"Lezgian","code":"lez"},
{"lang":"Ligurian","code":"lij"},
{"lang":"Limburgish","code":"li"},
{"lang":"Lingala","code":"ln"},
{"lang":"Lingua Franca Nova","code":"lfn"},
{"lang":"Lithuanian","code":"lt"},
{"lang":"Livvi-Karelian","code":"olo"},
{"lang":"Lojban","code":"jbo"},
{"lang":"Lombard","code":"lmo"},
{"lang":"Low German","code":"nds"},
{"lang":"Lower Sorbian","code":"dsb"},
{"lang":"Luganda","code":"lg"},
{"lang":"Luxembourgish","code":"lb"},
{"lang":"Macedonian","code":"mk"},
{"lang":"Madurese","code":"mad"},
{"lang":"Maithili","code":"mai"},
{"lang":"Malagasy","code":"mg"},
{"lang":"Malay","code":"ms"},
{"lang":"Malayalam","code":"ml"},
{"lang":"Maldivian","code":"dv"},
{"lang":"Maltese","code":"mt"},
{"lang":"Mandailing Batak","code":"btm"},
{"lang":"Manx","code":"gv"},
{"lang":"Māori","code":"mi"},
{"lang":"Marathi","code":"mr"},
{"lang":"Mazanderani","code":"mzn"},
{"lang":"MeadowMari","code":"mhr"},
{"lang":"Meitei","code":"mni"},
{"lang":"Minangkabau","code":"min"},
{"lang":"Mingrelian","code":"xmf"},
{"lang":"Mirandese","code":"mwl"},
{"lang":"Moksha","code":"mdf"},
{"lang":"Mon","code":"mnw"},
{"lang":"Mongolian","code":"mn"},
{"lang":"Moroccan Arabic","code":"ary"},
{"lang":"N'Ko","code":"nqo"},
{"lang":"Nahuatl","code":"nah"},
{"lang":"Navajo","code":"nv"},
{"lang":"Neapolitan","code":"nap"},
{"lang":"Nepali","code":"ne"},
{"lang":"Newar","code":"new"},
{"lang":"Nias","code":"nia"},
{"lang":"Nigerian Pidgin","code":"pcm"},
{"lang":"Norfuk","code":"pih"},
{"lang":"Norman","code":"nrm"},
{"lang":"North Frisian","code":"frr"},
{"lang":"Northern Sámi","code":"se"},
{"lang":"Northern Sotho","code":"nso"},
{"lang":"Norwegian (Bokmål)","code":"no"},
{"lang":"Norwegian (Nynorsk)","code":"nn"},
{"lang":"Novial","code":"nov"},
{"lang":"Obolo","code":"ann"},
{"lang":"Occitan","code":"oc"},
{"lang":"Odia","code":"or"},
{"lang":"Old Church Slavonic","code":"cu"},
{"lang":"Old English","code":"ang"},
{"lang":"Oromo","code":"om"},
{"lang":"Ossetian","code":"os"},
{"lang":"Pa'O","code":"blk"},
{"lang":"Paiwan","code":"pwn"},
{"lang":"Palatine German","code":"pfl"},
{"lang":"Pali","code":"pi"},
{"lang":"Pangasinan","code":"pag"},
{"lang":"Papiamento","code":"pap"},
{"lang":"Pashto","code":"ps"},
{"lang":"Pennsylvania Dutch","code":"pdc"},
{"lang":"Persian","code":"fa"},
{"lang":"Picard","code":"pcd"},
{"lang":"Piedmontese","code":"pms"},
{"lang":"Polish","code":"pl"},
{"lang":"Pontic Greek","code":"pnt"},
{"lang":"Portuguese","code":"pt"},
{"lang":"Punjabi","code":"pa"},
{"lang":"Quechua (SouthernQuechua)","code":"qu"},
{"lang":"Ripuarian","code":"ksh"},
{"lang":"Romani (Vlax Romani)","code":"rmy"},
{"lang":"Romanian","code":"ro"},
{"lang":"Romansh","code":"rm"},
{"lang":"Russian","code":"ru"},
{"lang":"Rusyn","code":"rue"},
{"lang":"Sakizaya","code":"szy"},
{"lang":"Samoan","code":"sm"},
{"lang":"Samogitian","code":"bat-smg"},
{"lang":"Sango","code":"sg"},
{"lang":"Sanskrit","code":"sa"},
{"lang":"Santali","code":"sat"},
{"lang":"Saraiki","code":"skr"},
{"lang":"Sardinian","code":"sc"},
{"lang":"Saterland Frisian","code":"stq"},
{"lang":"Scots","code":"sco"},
{"lang":"Scottish Gaelic","code":"gd"},
{"lang":"Seediq","code":"trv"},
{"lang":"Serbian","code":"sr"},
{"lang":"Serbo-Croatian","code":"sh"},
{"lang":"Shan","code":"shn"},
{"lang":"Shilha","code":"shi"},
{"lang":"Shona","code":"sn"},
{"lang":"Sicilian","code":"scn"},
{"lang":"Silesian","code":"szl"},
{"lang":"Simple English","code":"simple"},
{"lang":"Sindhi","code":"sd"},
{"lang":"Sinhala","code":"si"},
{"lang":"Slovak","code":"sk"},
{"lang":"Slovene","code":"sl"},
{"lang":"Somali","code":"so"},
{"lang":"Sotho","code":"st"},
{"lang":"South Azerbaijani","code":"azb"},
{"lang":"Southern Altai","code":"alt"},
{"lang":"Southern Min","code":"zh-min-nan"},
{"lang":"Southern Ndebele","code":"nr"},
{"lang":"Spanish","code":"es"},
{"lang":"Sranan Tongo","code":"srn"},
{"lang":"Standard Moroccan Amazigh","code":"zgh"},
{"lang":"Sundanese","code":"su"},
{"lang":"Swahili","code":"sw"},
{"lang":"Swazi","code":"ss"},
{"lang":"Swedish","code":"sv"},
{"lang":"Tagalog","code":"tl"},
{"lang":"Tahitian","code":"ty"},
{"lang":"TaiNüa","code":"tdd"},
{"lang":"Tajik","code":"tg"},
{"lang":"Talysh","code":"tly"},
{"lang":"Tamil","code":"ta"},
{"lang":"Tarantino","code":"roa-tara"},
{"lang":"Tatar","code":"tt"},
{"lang":"Telugu","code":"te"},
{"lang":"Tetum","code":"tet"},
{"lang":"Thai","code":"th"},
{"lang":"Tigrinya","code":"ti"},
{"lang":"TobaBatak","code":"bbc"},
{"lang":"TokPisin","code":"tpi"},
{"lang":"Tongan","code":"to"},
{"lang":"Tsonga","code":"ts"},
{"lang":"Tswana","code":"tn"},
{"lang":"Tulu","code":"tcy"},
{"lang":"Tumbuka","code":"tum"},
{"lang":"Turkish","code":"tr"},
{"lang":"Turkmen","code":"tk"},
{"lang":"Tuvan","code":"tyv"},
{"lang":"Twi","code":"tw"},
{"lang":"Tyap","code":"kcg"},
{"lang":"Udmurt","code":"udm"},
{"lang":"Ukrainian","code":"uk"},
{"lang":"UpperSorbian","code":"hsb"},
{"lang":"Urdu","code":"ur"},
{"lang":"Uyghur","code":"ug"},
{"lang":"Uzbek","code":"uz"},
{"lang":"Venda","code":"ve"},
{"lang":"Venetian","code":"vec"},
{"lang":"Veps","code":"vep"},
{"lang":"Vietnamese","code":"vi"},
{"lang":"Volapük","code":"vo"},
{"lang":"Võro","code":"fiu-vro"},
{"lang":"Walloon","code":"wa"},
{"lang":"Waray","code":"war"},
{"lang":"Wayuu","code":"guc"},
{"lang":"Welsh","code":"cy"},
{"lang":"West Coast Bajau","code":"bdr"},
{"lang":"West Flemish","code":"vls"},
{"lang":"West Frisian","code":"fy"},
{"lang":"Western Armenian","code":"hyw"},
{"lang":"Western Punjabi","code":"pnb"},
{"lang":"Wolof","code":"wo"},
{"lang":"Wu Chinese","code":"wuu"},
{"lang":"Xhosa","code":"xh"},
{"lang":"Yakut","code":"sah"},
{"lang":"Yiddish","code":"yi"},
{"lang":"Yoruba","code":"yo"},
{"lang":"Zamboanga Chavacano","code":"cbk-zam"},
{"lang":"Zaza","code":"diq"},
{"lang":"Zeelandic","code":"zea"},
{"lang":"Zhuang (Standard Zhuang)","code":"za"},
{"lang":"Zulu","code":"zu"}
];

var root = document.getElementById('appRoot');

var App = {
	search: '',
	searchLanguages: '',
	// wikipedia_address_locale: 'https://ia.wikipedia.org/w/api.php?action=query&format=json&list=search&srlimit=500&srsearch=',
	wikipedia_address_locale: '',
	fetch_result: { query: { searchinfo: { totalhits: 0 } } },
	listOfWikipedias: listOfWikipedias,
	filteredListOfWikipedias: listOfWikipedias,
	// savedLanguages is set in init() 
	// current_language_selection is set in init() 
	error: false,
	errors: {
		WIKIP_ERR: "There was an error retrieving the results from WikiPedia.",
		FETCH_ERR: "There was an error sending the request to WikiPedia.",
		SELECTED_LOCAL_MISSING: "Language not found.",
		NO_SEARCH_TERM: "Please enter a search term.",
		FAILED_TO_GENERATE_URL: "Failed to generate URL.",
	},

	fetchData: function () { 
		if (App.current_language_selection.code === '') {
			App.error = App.errors.SELECTED_LOCAL_MISSING;
			return;
		}

		if (App.wikipedia_address_locale === '') {
			App.error = App.errors.FAILED_TO_GENERATE_URL;
			return;
		}

		if (App.search === '') {
			App.error = App.errors.NO_SEARCH_TERM;
			return;
		}

		const wikipediaRequestUrl = App.wikipedia_address_locale + App.search + '&srwhat=text&origin=*';
		
		return fetch( wikipediaRequestUrl )
			.then(response => response.json())
			.then(data => {
				// console.log('data', data);
				App.error = false;

				if (data.hasOwnProperty('error')) { // Handle wikipedia returned error state
					App.fetch_result.query.searchinfo.totalhits = 0;
					return (App.error = App.errors.WIKIP_ERR);
				}

				App.saveToLocalStorage();
				return (App.fetch_result = data);
			})
			.catch(error => {
				App.error = App.errors.FETCH_ERR;
				App.fetch_result.query.searchinfo.totalhits = 0;
			}
		);
	},
	filterLanguagesSelect: function () {
		if (App.searchLanguages.trim() === '') {
			// Set defaults
			App.filteredListOfWikipedias = listOfWikipedias;
			App.setLanguageLocale('');
		} 
		else {
			const matches = App.listOfWikipedias.filter(option =>
				option.lang.toLowerCase().includes(App.searchLanguages.toLowerCase())
			);
			App.filteredListOfWikipedias = matches;

			// Automatically select the first match if found
			if (matches.length > 0) {
				App.setLanguageLocale(matches[0].code);
			} else {
				App.setLanguageLocale('');
			}
		}
	},
	setLanguageLocale: function (code) {
		if (code === '') {
			App.current_language_selection.code = '';
			App.current_language_selection.lang = '';
			return;
		}

		App.current_language_selection.code = code;
		App.current_language_selection.lang = App.getLanguageName(code);
		App.wikipedia_address_locale = 'https://' + code + '.wikipedia.org/w/api.php?action=query&format=json&list=search&srlimit=500&srsearch=';
	},
	saveToLocalStorage: function () {
		// Check if selected_locale already exists as a property value in savedLanguages
		const index = App.savedLanguages.findIndex(lang => lang.code === App.current_language_selection.code);

		// Create a new object for the current selection to avoid reference issues
		const newLanguage = {
			code: App.current_language_selection.code,
			lang: App.current_language_selection.lang
		};

		if (index === -1) {
			App.savedLanguages.push(newLanguage);
			localStorage.setItem('savedLanguages_version2', JSON.stringify(App.savedLanguages));
		}	

		// NEW

		// Check if selected_locale already exists as a property value in savedLanguages
		// const index = App.savedLanguages.findIndex(lang => lang.code === App.current_language_selection.code);
		
		// if (index === -1) {
		// 	// Create a new object for the current selection to avoid reference issues
		// 	const newLanguage = {
		// 		code: App.current_language_selection.code,
		// 		lang: App.current_language_selection.lang
		// 	};
			
		// 	// Update both the App state and localStorage
		// 	App.savedLanguages = [...App.savedLanguages, newLanguage];
		// 	localStorage.setItem('savedLanguages_version2', JSON.stringify(App.savedLanguages));
		// }
	},
	clearLocalStorage: function () {
		localStorage.removeItem('savedLanguages_version2');
		App.savedLanguages = [];
	},
	getLanguageName: function (code) {
		const locale = App.listOfWikipedias.find(wikiLocale => wikiLocale.code === code);
		return locale ? locale.lang : 'Error: Unknown language';
	},
	// init: function () {
	// 	// Set the default language selection if user has previously saved a language
	// 	const initSavedLanguages = JSON.parse(localStorage.getItem('savedLanguages_version2')) || [];
	// 	const initCurrentLanguageSelection = initSavedLanguages?.[0] || {code: '', lang: ''};

	// 	App.current_language_selection = initCurrentLanguageSelection;
	// 	App.savedLanguages = initSavedLanguages;
	// },
	oninit: function (vnode) {
		let tmp = [
			// {
			// 	"selected_locale": "fi",
			// 	"wikipedia_address_locale": "https://fi.wikipedia.org/w/api.php?action=query&format=json&list=search&srlimit=500&srsearch="
			// },
			// {
			// 	"selected_locale": "ady",
			// 	"wikipedia_address_locale": "https://ady.wikipedia.org/w/api.php?action=query&format=json&list=search&srlimit=500&srsearch="
			// }
		];
		// App.savedLanguages = JSON.parse(localStorage.getItem('savedLanguages')) || tmp;
		// App.selected_locale = App.savedLanguages.length > 0 ? App.savedLanguages[0].selected_locale : '';
		// App.wikipedia_address_locale = App.savedLanguages.length > 0 ? App.savedLanguages[0].wikipedia_address_locale : '';

		// OLD
		// Set the default language selection if user has previously saved a language
		// let initSavedLanguages = JSON.parse(localStorage.getItem('savedLanguages_version2')) || [];

		// App.current_language_selection = {code: '', lang: ''};

		// if (initSavedLanguages?.[0] && initSavedLanguages[0].code) {
		// 	App.setLanguageLocale(initSavedLanguages[0].code);
		// }

		// App.savedLanguages = initSavedLanguages;

		// NEW
		let initSavedLanguages = JSON.parse(localStorage.getItem('savedLanguages_version2')) || [];
		
		// Create a deep copy of the array
		App.savedLanguages = JSON.parse(JSON.stringify(initSavedLanguages));

		App.current_language_selection = { code: '', lang: '' };
		
		if (initSavedLanguages?.[0] && initSavedLanguages[0].code) {
			App.setLanguageLocale(initSavedLanguages[0].code);
		}
	},
	view: function (vnode) {
		return [
			m('pre', 'savedLanguages: ' + JSON.stringify(App.savedLanguages)),
			m('pre', 'db: ' + localStorage.getItem('savedLanguages_version2')),
			m('pre', 'current selected: ' + App.current_language_selection.code + ' - ' + App.current_language_selection.lang),
			m('pre', 'wp response: ' + JSON.stringify(App.fetch_result)),
			

			m('nav', 
				m('ul', 
					App.savedLanguages.map(lang => 
						m('li', 
							{
								onclick: () => {
									App.setLanguageLocale(lang.code);
									// App.selected_locale = lang.selected_locale;
									// App.wikipedia_address_locale = lang.wikipedia_address_locale;
								},
								class: App.current_language_selection.code === lang.code ? 'language-selector-active' : ''
							}, 
							lang.lang
						)
					)
				)
			),

			m(
				'p', 
				m('a', { onclick: () => App.clearLocalStorage() }, 'Clear local storage')
			),

			m(
				'select', 
				{ 
					onchange: function (e) {
						App.setLanguageLocale(e.target.value);
						// App.selected_locale = e.target.value;
						// App.wikipedia_address_locale = 'https://' + App.selected_locale + '.wikipedia.org/w/api.php?action=query&format=json&list=search&srlimit=500&srsearch=';
						App.saveToLocalStorage();
					},
				},
				[
					m(
						'option', 
						{ 
							value: '', 
							selected: true,
							disabled: true,
						}, 
						'Select language'
					),

					App.listOfWikipedias.map((obj) =>
						m(
							'option', 
							{ 
								value: obj.code, 
								selected: obj.code === App.current_language_selection.code,
							}, 
							obj.lang
						)
					)
				]
			),

			m('input', {
				placeholder: 'Search Wikipedia',
				value: App.search,
				oninput: function (e) {
					App.search = e.target.value;
				},
				onkeypress: function (e) {
					if (e.key === 'Enter') {
						App.fetchData();
					}
				}
			}),
		];
	},
};

m.mount(root, App);


</script>



</div><!-- End div.main -->
</body>
</html>